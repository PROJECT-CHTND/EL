{
  "objective": "Windows 11 バージョン 21H2 の初期セットアップ（OOBE）を完了し、デスクトップ画面を表示させる。",
  "environment": {
    "scope": "PC端末ローカル",
    "env": "Windows 11 Home / Pro (Version 21H2)",
    "blast_radius": "対象のPC端末のみ",
    "rollbackable": false
  },
  "prerequisites": [
    "Windows 11 21H2 インストール済みのPC",
    "インターネット接続環境（Homeエディションの場合は必須）",
    "Wi-FiのSSIDおよびパスワード（無線接続の場合）"
  ],
  "steps": [
    {
      "id": "1",
      "desc": "言語および地域の設定",
      "cmd": "画面指示に従い「日本語」および「日本」を選択",
      "expected": "キーボードレイアウト設定画面が表示される"
    },
    {
      "id": "2",
      "desc": "キーボードレイアウトの設定",
      "cmd": "Microsoft IMEを選択し「はい」をクリック。2つ目のレイアウトは「スキップ」を選択",
      "expected": "ネットワーク接続画面が表示される"
    },
    {
      "id": "3",
      "desc": "ネットワーク接続",
      "cmd": "SSIDを選択しパスワードを入力して接続。完了後「次へ」をクリック",
      "expected": "アップデート確認、ライセンス契約画面へ進む"
    },
    {
      "id": "4",
      "desc": "ライセンス同意とデバイス命名",
      "cmd": "「同意」をクリック後、PCの名前を入力し「次へ」をクリック",
      "expected": "設定対象（個人/組織）の選択画面、またはサインイン画面が表示される"
    },
    {
      "id": "5",
      "desc": "PINのセットアップ",
      "cmd": "「PINの作成」をクリックし、4桁以上の数字（必要に応じて英字記号）を入力",
      "expected": "プライバシー設定画面が表示される"
    },
    {
      "id": "6",
      "desc": "サービス・プライバシー設定",
      "cmd": "プライバシー設定、エクスペリエンスのカスタマイズ、OneDrive、Game Passの設定を任意に選択",
      "expected": "「お待ちください…」の待機画面が表示される"
    }
  ],
  "branches": [
    {
      "cond": "Windows 11 Proを使用し、かつローカルアカウントで設定したい場合",
      "path": "ネットワーク接続を行わずに設定を進める（Homeは不可）"
    },
    {
      "cond": "Windows 11 Proを使用している場合",
      "path": "「このデバイスをどのように設定しますか？」にて「個人用に設定」または「職場または学校用」を選択する"
    }
  ],
  "validation": [
    {
      "obs": "デスクトップ画面の表示",
      "pass_criteria": "デスクトップ画面が表示され、マウス操作やスタートメニューの表示が可能であること"
    }
  ],
  "rollback": [
    {
      "case": "設定のやり直しが必要な場合",
      "steps": [
        "OSの再インストールまたは回復ドライブからの初期化を実行する"
      ]
    }
  ],
  "hazards": [
    {
      "type": "OSバージョンの相違",
      "impact": "22H2以降の場合、Home/Pro共に対処なしではインターネット接続とMicrosoftアカウントが必須となり、手順が機能しない可能性がある",
      "mitigation": "事前にOSバージョンを確認し、22H2以降の場合はインターネット環境を必ず用意する"
    }
  ]
}